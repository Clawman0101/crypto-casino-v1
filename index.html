<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoPlay Casino - Free Crypto Casino</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ffb800;
            --primary-dark: #cc9200;
            --secondary: #1a1a2e;
            --secondary-light: #2d2d44;
            --bg: #0a0a14;
            --bg-gradient: linear-gradient(135deg, #0a0a14 0%, #1a1a2e 100%);
            --card-bg: #161625;
            --card-border: #2a2a45;
            --success: #00ff88;
            --danger: #ff4757;
            --info: #3498db;
            --text: #e0e0e0;
            --text-muted: #8888aa;
            --gold: #ffd700;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Roboto', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; background: var(--bg-gradient); }
        header { background: linear-gradient(180deg, rgba(26,26,46,0.98) 0%, rgba(26,26,46,0.9) 100%); padding: 15px 0; position: sticky; top: 0; z-index: 100; border-bottom: 2px solid var(--primary); backdrop-filter: blur(10px); }
        .header-content { max-width: 1400px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
        .logo { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; font-weight: 900; color: var(--primary); text-decoration: none; text-shadow: 0 0 20px rgba(255,184,0,0.5); }
        .logo span { color: #fff; }
        .token-balance { display: flex; align-items: center; gap: 10px; background: rgba(255,184,0,0.1); padding: 10px 20px; border-radius: 50px; border: 2px solid var(--primary); }
        .token-icon { font-size: 1.5rem; }
        .balance-amount { font-family: 'Orbitron', sans-serif; font-size: 1.3rem; font-weight: 700; color: var(--primary); }
        .faucet-btn { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: #000; border: none; padding: 10px 20px; border-radius: 50px; font-weight: 700; cursor: pointer; font-family: 'Orbitron', sans-serif; transition: all 0.3s; }
        .faucet-btn:hover:not(:disabled) { transform: scale(1.05); box-shadow: 0 0 30px rgba(255,184,0,0.5); }
        .faucet-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        nav { background: var(--secondary); border-bottom: 1px solid var(--card-border); }
        nav ul { max-width: 1400px; margin: 0 auto; padding: 10px 20px; display: flex; list-style: none; gap: 10px; flex-wrap: wrap; justify-content: center; }
        nav a { color: var(--text); text-decoration: none; padding: 10px 20px; border-radius: 8px; font-weight: 500; transition: all 0.3s; display: flex; align-items: center; gap: 8px; }
        nav a:hover, nav a.active { background: var(--primary); color: #000; }
        main { max-width: 1400px; margin: 0 auto; padding: 30px 20px; }
        .game-section { display: none; }
        .game-section.active { display: block; }
        .section-header { text-align: center; margin-bottom: 30px; }
        .section-header h2 { font-family: 'Orbitron', sans-serif; font-size: 2rem; margin-bottom: 10px; color: var(--primary); }
        .games-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 40px; }
        .game-card { background: var(--card-bg); border: 2px solid var(--card-border); border-radius: 16px; padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .game-card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 10px 40px rgba(255,184,0,0.2); }
        .game-card.selected { border-color: var(--primary); box-shadow: 0 0 30px rgba(255,184,0,0.3); }
        .game-icon { font-size: 4rem; margin-bottom: 15px; }
        .game-card h3 { font-family: 'Orbitron', sans-serif; margin-bottom: 10px; color: var(--text); }
        .game-card p { color: var(--text-muted); font-size: 0.9rem; }
        .game-card .odds { color: var(--primary); font-weight: 700; margin-top: 10px; }
        .game-area { background: var(--card-bg); border: 2px solid var(--card-border); border-radius: 20px; padding: 40px; max-width: 800px; margin: 0 auto; }
        .game-display { font-size: 6rem; text-align: center; margin: 30px 0; min-height: 150px; display: flex; align-items: center; justify-content: center; }
        .game-display.spin { animation: shake 0.5s infinite; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px) rotate(-5deg); } 75% { transform: translateX(10px) rotate(5deg); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .game-display.win { animation: pulse 0.5s ease; }
        .game-display.lose { opacity: 0.5; }
        .bet-controls { display: flex; flex-direction: column; gap: 20px; align-items: center; }
        .bet-input-group { display: flex; align-items: center; gap: 15px; }
        .bet-input-group label { font-weight: 600; color: var(--text-muted); }
        .bet-input { background: var(--bg); border: 2px solid var(--card-border); color: var(--text); padding: 15px 20px; border-radius: 10px; font-size: 1.2rem; font-family: 'Orbitron', sans-serif; width: 150px; text-align: center; }
        .bet-input:focus { outline: none; border-color: var(--primary); }
        .quick-bets { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .quick-bet-btn { background: var(--secondary-light); border: 1px solid var(--card-border); color: var(--text); padding: 8px 15px; border-radius: 20px; cursor: pointer; transition: all 0.3s; }
        .quick-bet-btn:hover { border-color: var(--primary); color: var(--primary); }
        .play-btn { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: #000; border: none; padding: 18px 50px; border-radius: 50px; font-size: 1.2rem; font-weight: 700; font-family: 'Orbitron', sans-serif; cursor: pointer; transition: all 0.3s; text-transform: uppercase; }
        .play-btn:hover:not(:disabled) { transform: scale(1.05); box-shadow: 0 0 40px rgba(255,184,0,0.5); }
        .play-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .result-message { text-align: center; margin-top: 20px; font-size: 1.5rem; font-weight: 700; min-height: 40px; }
        .result-message.win { color: var(--success); }
        .result-message.lose { color: var(--danger); }
        .slots-container { display: flex; justify-content: center; gap: 20px; margin: 30px 0; flex-wrap: wrap; }
        .slot-reel { width: 80px; height: 100px; background: linear-gradient(180deg, #1a1a2e, #0a0a14); border: 3px solid var(--primary); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 3rem; }
        .roulette-wheel { width: 280px; height: 280px; border-radius: 50%; background: conic-gradient(from 0deg, #ff0000 0deg 15deg, #000 15deg 30deg, #ff0000 30deg 45deg, #000 45deg 60deg, #ff0000 60deg 75deg, #000 75deg 90deg, #ff0000 90deg 105deg, #000 105deg 120deg, #ff0000 120deg 135deg, #000 135deg 150deg, #ff0000 150deg 165deg, #000 165deg 180deg, #ff0000 180deg 195deg, #000 195deg 210deg, #ff0000 210deg 225deg, #000 225deg 240deg, #ff0000 240deg 255deg, #000 255deg 270deg, #ff0000 270deg 285deg, #000 285deg 300deg, #ff0000 300deg 315deg, #000 315deg 330deg, #ff0000 330deg 345deg, #000 345deg 360deg); margin: 30px auto; position: relative; border: 5px solid var(--primary); }
        .roulette-result { font-family: 'Orbitron', sans-serif; font-size: 3rem; text-align: center; margin: 20px 0; }
        .roulette-bets { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
        .roulette-bet-btn { padding: 15px 30px; border-radius: 10px; font-weight: 700; cursor: pointer; border: 2px solid; transition: all 0.3s; }
        .roulette-bet-btn.red { background: rgba(255,0,0,0.2); border-color: #ff0000; color: #ff0000; }
        .roulette-bet-btn.black { background: rgba(0,0,0,0.3); border-color: #888; color: #888; }
        .roulette-bet-btn.green { background: rgba(0,255,0,0.2); border-color: #00ff00; color: #00ff00; }
        .roulette-bet-btn.selected.red { background: #ff0000; color: #fff; }
        .roulette-bet-btn.selected.black { background: #333; color: #fff; }
        .roulette-bet-btn.selected.green { background: #00ff00; color: #000; }
        .keno-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 8px; max-width: 500px; margin: 20px auto; }
        .keno-number { aspect-ratio: 1; background: var(--secondary-light); border: 2px solid var(--card-border); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; cursor: pointer; transition: all 0.3s; font-size: 0.9rem; }
        .keno-number:hover { border-color: var(--primary); }
        .keno-number.selected { background: var(--primary); color: #000; border-color: var(--primary); }
        .keno-number.hit { background: var(--success); color: #000; border-color: var(--success); }
        .keno-number.miss { opacity: 0.3; }
        .card-display { font-size: 6rem; text-align: center; margin: 20px 0; }
        .hl-buttons { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
        .hl-btn { padding: 20px 40px; border-radius: 10px; font-size: 1.2rem; font-weight: 700; cursor: pointer; border: 2px solid; transition: all 0.3s; }
        .hl-btn.higher { background: rgba(0,255,0,0.2); border-color: var(--success); color: var(--success); }
        .hl-btn.lower { background: rgba(255,0,0,0.2); border-color: var(--danger); color: var(--danger); }
        .hl-btn.selected.higher { background: var(--success); color: #000; }
        .hl-btn.selected.lower { background: var(--danger); color: #fff; }
        .vp-card { cursor: pointer; transition: all 0.2s; padding: 5px 10px; border-radius: 8px; display: inline-block; }
        .vp-card:hover { background: rgba(255,184,0,0.2); transform: scale(1.1); }
        .leaderboard-table, .history-table { width: 100%; border-collapse: collapse; background: var(--card-bg); border-radius: 16px; overflow: hidden; }
        .leaderboard-table th, .leaderboard-table td, .history-table th, .history-table td { padding: 15px 20px; text-align: left; }
        .leaderboard-table th, .history-table th { background: var(--secondary); font-family: 'Orbitron', sans-serif; color: var(--primary); }
        .leaderboard-table tr:nth-child(1) td { background: linear-gradient(90deg, rgba(255,215,0,0.2), transparent); }
        .leaderboard-table tr:nth-child(2) td { background: linear-gradient(90deg, rgba(192,192,192,0.2), transparent); }
        .leaderboard-table tr:nth-child(3) td { background: linear-gradient(90deg, rgba(205,127,50,0.2), transparent); }
        .leaderboard-table td:first-child { font-weight: 700; font-family: 'Orbitron', sans-serif; }
        .history-win { color: var(--success); }
        .history-lose { color: var(--danger); }
        .jackpot-display { text-align: center; padding: 30px; background: linear-gradient(135deg, rgba(255,184,0,0.1), rgba(255,215,0,0.05)); border: 2px solid var(--gold); border-radius: 20px; margin-bottom: 30px; }
        .jackpot-label { font-family: 'Orbitron', sans-serif; color: var(--gold); font-size: 1.2rem; margin-bottom: 10px; }
        .jackpot-amount { font-family: 'Orbitron', sans-serif; font-size: 3rem; font-weight: 900; color: var(--gold); text-shadow: 0 0 30px rgba(255,215,0,0.5); }
        .jackpot-chance { color: var(--text-muted); margin-top: 10px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--card-bg); border: 2px solid var(--card-border); border-radius: 12px; padding: 20px; text-align: center; }
        .stat-label { color: var(--text-muted); font-size: 0.9rem; }
        .stat-value { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; color: var(--primary); margin-top: 5px; }
        .stat-value.win { color: var(--success); }
        .stat-value.lose { color: var(--danger); }
        footer { background: var(--secondary); padding: 30px 20px; text-align: center; margin-top: 50px; border-top: 2px solid var(--card-border); }
        footer p { color: var(--text-muted); }
        @media (max-width: 768px) { .header-content { flex-direction: column; text-align: center; } .games-grid { grid-template-columns: 1fr; } .keno-grid { grid-template-columns: repeat(5, 1fr); } }
        .toast-container { position: fixed; top: 100px; right: 20px; z-index: 1000; display: flex; flex-direction: column; gap: 10px; }
        .toast { background: var(--card-bg); border: 2px solid var(--primary); padding: 15px 25px; border-radius: 10px; animation: slideIn 0.3s ease; display: flex; align-items: center; gap: 10px; }
        .toast.win { border-color: var(--success); }
        .toast.lose { border-color: var(--danger); }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="#" class="logo">‚Çø Crypto<span>Play</span></a>
            <div class="user-section" id="user-section">
                <button class="faucet-btn" onclick="showAuthModal('login')" id="login-btn">üîë Login</button>
                <button class="faucet-btn" onclick="showAuthModal('signup')" id="signup-btn" style="background:var(--info)">üìù Sign Up</button>
            </div>
            <div class="token-balance" id="balance-section" style="display:none;">
                <span class="user-name" id="user-name" style="color:var(--primary);margin-right:10px;"></span>
                <span class="token-icon">ü™ô</span>
                <span class="balance-amount" id="balance">5000</span>
                <button class="faucet-btn" id="faucetBtn" onclick="claimFaucet()">üíß Faucet</button>
                <button class="faucet-btn" onclick="logout()" style="background:var(--danger)">üö™ Logout</button>
            </div>
        </div>
    </header>

    <!-- Auth Modal -->
    <div id="auth-modal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:1000;align-items:center;justify-content:center;">
        <div style="background:var(--card-bg);padding:40px;border-radius:20px;max-width:400px;width:90%;border:2px solid var(--primary);">
            <h2 id="auth-title" style="color:var(--primary);margin-bottom:20px;text-align:center;font-family:'Orbitron',sans-serif;">Login</h2>
            <input type="text" id="auth-username" placeholder="Username" style="width:100%;padding:15px;margin-bottom:15px;background:var(--bg);border:2px solid var(--card-border);color:var(--text);border-radius:10px;">
            <input type="password" id="auth-password" placeholder="Password" style="width:100%;padding:15px;margin-bottom:15px;background:var(--bg);border:2px solid var(--card-border);color:var(--text);border-radius:10px;">
            <button class="play-btn" onclick="handleAuth()" id="auth-btn" style="width:100%;">Login</button>
            <p style="text-align:center;margin-top:15px;color:var(--text-muted);">
                <span id="auth-toggle-text">Don't have an account?</span> 
                <a href="#" onclick="toggleAuthMode()" style="color:var(--primary);">Click here</a>
            </p>
            <button onclick="closeAuthModal()" style="position:absolute;top:10px;right:15px;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer;">‚úï</button>
        </div>
    </div>
    <nav>
        <ul>
            <li><a href="#" class="active" data-game="slots">üé∞ Slots</a></li>
            <li><a href="#" data-game="blackjack">‚ô†Ô∏è Blackjack</a></li>
            <li><a href="#" data-game="videopoker">üÉè Video Poker</a></li>
            <li><a href="#" data-game="coinflip">ü™ô Coin Flip</a></li>
            <li><a href="#" data-game="dice">üé≤ Dice</a></li>
            <li><a href="#" data-game="roulette">üéØ Roulette</a></li>
            <li><a href="#" data-game="keno">üé± Keno</a></li>
            <li><a href="#" data-game="highlow">üÉè High/Low</a></li>
            <li><a href="#" data-game="lottery">üéÅ Lottery</a></li>
            <li><a href="#" data-game="jackpot">üí∞ Jackpot</a></li>
            <li><a href="#" data-game="leaderboard">üèÜ Leaderboard</a></li>
            <li><a href="#" data-game="history">üìú History</a></li>
        </ul>
    </nav>
    <main>
        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card"><div class="stat-label">Your Balance</div><div class="stat-value" id="stat-balance">5000</div></div>
            <div class="stat-card"><div class="stat-label">Total Wagered</div><div class="stat-value" id="stat-wagered">0</div></div>
            <div class="stat-card"><div class="stat-label">Games Played</div><div class="stat-value" id="stat-games">0</div></div>
            <div class="stat-card"><div class="stat-label">Biggest Win</div><div class="stat-value win" id="stat-biggest">0</div></div>
        </div>

        <!-- Slots -->
        <section class="game-section active" id="slots-section">
            <div class="section-header"><h2>üé∞ Slot Machine</h2><p>Spin to win! Match symbols for big wins!</p></div>
            <div class="game-area">
                <div class="slots-container" id="slot-display"><div class="slot-reel">üçí</div><div class="slot-reel">üçã</div><div class="slot-reel">üçá</div><div class="slot-reel">üíé</div><div class="slot-reel">ü™ô</div></div>
                <div class="bet-controls">
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="slots-bet" value="100" min="1"></div>
                    <div class="quick-bets">
                        <button class="quick-bet-btn" onclick="setBet('slots', 10)">10</button>
                        <button class="quick-bet-btn" onclick="setBet('slots', 50)">50</button>
                        <button class="quick-bet-btn" onclick="setBet('slots', 100)">100</button>
                        <button class="quick-bet-btn" onclick="setBet('slots', 500)">500</button>
                        <button class="quick-bet-btn" onclick="setBet('slots', 1000)">1000</button>
                    </div>
                    <button class="play-btn" onclick="playSlots()">SPIN!</button>
                </div>
                <div class="result-message" id="slots-result"></div>
            </div>
        </section>

        <!-- Blackjack -->
        <section class="game-section" id="blackjack-section">
            <div class="section-header"><h2>‚ô†Ô∏è Blackjack</h2><p>Beat the dealer! Get 21 or closer to win!</p></div>
            <div class="game-area">
                <div style="display:flex;justify-content:space-between;margin-bottom:20px;">
                    <div style="text-align:center;">
                        <h3 style="color:var(--primary)">Dealer's Hand</h3>
                        <div id="dealer-cards" style="font-size:2.5rem;margin:10px 0;">üÇ† üÇ†</div>
                        <div id="dealer-score" style="color:var(--text-muted)">Score: ?</div>
                    </div>
                </div>
                <div style="text-align:center;margin:20px 0;">
                    <div id="bj-result" style="font-size:1.5rem;font-weight:700;min-height:30px;"></div>
                </div>
                <div style="display:flex;justify-content:space-between;margin-bottom:20px;">
                    <div style="text-align:center;">
                        <h3 style="color:var(--primary)">Your Hand</h3>
                        <div id="player-cards" style="font-size:2.5rem;margin:10px 0;">üÇ† üÇ†</div>
                        <div id="player-score" style="color:var(--text-muted)">Score: 0</div>
                    </div>
                </div>
                <div class="bet-controls">
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="blackjack-bet" value="100" min="1"></div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:center;">
                        <button class="play-btn" onclick="startBlackjack()" id="bj-deal-btn">DEAL</button>
                        <button class="play-btn" onclick="hitBlackjack()" id="bj-hit-btn" style="display:none;background:var(--info)">HIT</button>
                        <button class="play-btn" onclick="standBlackjack()" id="bj-stand-btn" style="display:none;background:var(--danger)">STAND</button>
                    </div>
                </div>
                <p style="text-align:center;color:var(--text-muted);margin-top:15px">Blackjack pays 3:2 ‚Ä¢ Dealer stands on 17</p>
            </div>
        </section>

        <!-- Video Poker -->
        <section class="game-section" id="videopoker-section">
            <div class="section-header"><h2>üÉè Video Poker</h2><p>Draw cards, make the best poker hand!</p></div>
            <div class="game-area">
                <div id="vp-result" style="text-align:center;font-size:1.5rem;font-weight:700;min-height:30px;margin:10px 0;"></div>
                <div style="display:flex;justify-content:center;gap:10px;margin:20px 0;font-size:4rem;" id="vp-cards">
                    <span class="vp-card" data-held="false">üÇ†</span>
                    <span class="vp-card" data-held="false">üÇ†</span>
                    <span class="vp-card" data-held="false">üÇ†</span>
                    <span class="vp-card" data-held="false">üÇ†</span>
                    <span class="vp-card" data-held="false">üÇ†</span>
                </div>
                <p style="text-align:center;color:var(--primary);margin-bottom:10px;" id="vp-hand-name"></p>
                <div class="bet-controls">
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="videopoker-bet" value="100" min="1"></div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:center;">
                        <button class="play-btn" onclick="dealVideoPoker()" id="vp-deal-btn">DEAL</button>
                        <button class="play-btn" onclick="drawVideoPoker()" id="vp-draw-btn" style="display:none;background:var(--info)">DRAW</button>
                    </div>
                </div>
                <p style="text-align:center;color:var(--text-muted);margin-top:15px">
                    Jacks or Better ‚Ä¢ Pairs pay 1:2 ‚Ä¢ Royal Flush = Jackpot!
                </p>
            </div>
        </section>

        <!-- Coin Flip -->
        <section class="game-section" id="coinflip-section">
            <div class="section-header"><h2>ü™ô Coin Flip</h2><p>50/50 chance - pick heads or tails!</p></div>
            <div class="game-area">
                <div class="game-display" id="coin-display">ü™ô</div>
                <div class="bet-controls">
                    <div class="roulette-bets">
                        <button class="roulette-bet-btn red selected" onclick="selectCoin('heads')">Heads ü¶Ö</button>
                        <button class="roulette-bet-btn black" onclick="selectCoin('tails')">Tails ü™ô</button>
                    </div>
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="coin-bet" value="100" min="1"></div>
                    <button class="play-btn" onclick="playCoinFlip()">FLIP!</button>
                </div>
                <div class="result-message" id="coin-result"></div>
            </div>
        </section>

        <!-- Dice -->
        <section class="game-section" id="dice-section">
            <div class="section-header"><h2>üé≤ Dice Roll</h2><p>Roll over or under a number to win!</p></div>
            <div class="game-area">
                <div class="game-display" id="dice-display">üé≤</div>
                <div class="bet-controls">
                    <div style="text-align:center;margin-bottom:15px;">
                        <label style="color:var(--text-muted)">Roll </label>
                        <select id="dice-type" style="background:var(--bg);color:var(--text);border:2px solid var(--card-border);padding:10px;border-radius:8px;">
                            <option value="over">OVER</option>
                            <option value="under">UNDER</option>
                        </select>
                        <input type="number" id="dice-number" value="50" min="2" max="98" style="background:var(--bg);color:var(--text);border:2px solid var(--card-border);padding:10px;border-radius:8px;width:80px;text-align:center;">
                    </div>
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="dice-bet" value="100" min="1"></div>
                    <button class="play-btn" onclick="playDice()">ROLL!</button>
                </div>
                <div class="result-message" id="dice-result"></div>
            </div>
        </section>

        <!-- Roulette -->
        <section class="game-section" id="roulette-section">
            <div class="section-header"><h2>üéØ Roulette</h2><p>Red, Black, or Green - pick your color!</p></div>
            <div class="game-area">
                <div class="roulette-wheel" id="roulette-wheel"><div class="roulette-ball"></div></div>
                <div class="roulette-result" id="roulette-result">?</div>
                <div class="roulette-bets">
                    <button class="roulette-bet-btn red selected" onclick="selectRoulette('red')">üî¥ Red (2x)</button>
                    <button class="roulette-bet-btn black" onclick="selectRoulette('black')">‚ö´ Black (2x)</button>
                    <button class="roulette-bet-btn green" onclick="selectRoulette('green')">üü¢ Green (14x)</button>
                </div>
                <div class="bet-controls" style="margin-top:20px">
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="roulette-bet" value="100" min="1"></div>
                    <button class="play-btn" onclick="playRoulette()">SPIN!</button>
                </div>
                <div class="result-message" id="roulette-game-result"></div>
            </div>
        </section>

        <!-- Keno -->
        <section class="game-section" id="keno-section">
            <div class="section-header"><h2>üé± Keno</h2><p>Pick up to 10 numbers - match them to win!</p></div>
            <div class="game-area">
                <p style="text-align:center;color:var(--text-muted)">Pick up to 10 numbers:</p>
                <div class="keno-grid" id="keno-grid"></div>
                <p style="text-align:center;color:var(--primary);margin:10px 0">Selected: <span id="keno-count">0</span>/10</p>
                <div class="bet-controls">
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="keno-bet" value="100" min="1"></div>
                    <button class="play-btn" onclick="playKeno()">DRAW!</button>
                </div>
                <div class="result-message" id="keno-result"></div>
            </div>
        </section>

        <!-- High/Low -->
        <section class="game-section" id="highlow-section">
            <div class="section-header"><h2>üÉè High/Low</h2><p>Guess if the next card is higher or lower!</p></div>
            <div class="game-area">
                <div class="card-display" id="card-display">üÇ†</div>
                <p style="text-align:center;color:var(--text-muted)">Dealer's Card: <span id="dealer-card-rank">?</span></p>
                <div class="hl-buttons">
                    <button class="hl-btn higher selected" onclick="selectHL('higher')">‚ñ≤ HIGHER</button>
                    <button class="hl-btn lower" onclick="selectHL('lower')">‚ñº LOWER</button>
                </div>
                <div class="bet-controls" style="margin-top:20px">
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="hl-bet" value="100" min="1"></div>
                    <button class="play-btn" onclick="playHighLow()">DEAL!</button>
                </div>
                <div class="result-message" id="hl-result"></div>
            </div>
        </section>

        <!-- Lottery -->
        <section class="game-section" id="lottery-section">
            <div class="section-header"><h2>üéÅ Instant Lottery</h2><p>Buy a ticket - could win up to 100x your bet!</p></div>
            <div class="game-area">
                <div class="game-display" id="lottery-display">üé´</div>
                <div class="bet-controls">
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="lottery-bet" value="100" min="1"></div>
                    <button class="play-btn" onclick="playLottery()">BUY TICKET!</button>
                </div>
                <div class="result-message" id="lottery-result"></div>
                <p style="text-align:center;color:var(--text-muted);margin-top:20px">Prizes: Match 1 = 2x, 2 = 5x, 3 = 10x, 4 = 50x, 5 = 100x</p>
            </div>
        </section>

        <!-- Jackpot -->
        <section class="game-section" id="jackpot-section">
            <div class="section-header"><h2>üí∞ Jackpot</h2><p>Small chance, MASSIVE reward!</p></div>
            <div class="game-area">
                <div class="jackpot-display">
                    <div class="jackpot-label">JACKPOT</div>
                    <div class="jackpot-amount" id="jackpot-amount">ü™ô 10,000</div>
                    <div class="jackpot-chance">Win chance: 1 in 1,000</div>
                </div>
                <div class="bet-controls">
                    <div class="bet-input-group"><label>Bet:</label><input type="number" class="bet-input" id="jackpot-bet" value="100" min="1"></div>
                    <button class="play-btn" onclick="playJackpot()">TRY FOR JACKPOT!</button>
                </div>
                <div class="result-message" id="jackpot-result"></div>
            </div>
        </section>

        <!-- Leaderboard -->
        <section class="game-section" id="leaderboard-section">
            <div class="section-header"><h2>üèÜ Leaderboard</h2><p>Top players by total winnings!</p></div>
            <div class="game-area">
                <table class="leaderboard-table"><thead><tr><th>#</th><th>Player</th><th>Winnings</th><th>Games</th></tr></thead><tbody id="leaderboard-body"></tbody></table>
            </div>
        </section>

        <!-- History -->
        <section class="game-section" id="history-section">
            <div class="section-header"><h2>üìú Bet History</h2><p>Your recent bets</p></div>
            <div class="game-area">
                <table class="history-table"><thead><tr><th>Game</th><th>Bet</th><th>Result</th><th>Profit</th></tr></thead><tbody id="history-body"></tbody></table>
            </div>
        </section>
    </main>
    <footer><p>¬© 2026 CryptoPlay Casino - Play for fun only!</p><p>This is NOT real gambling. No real money involved.</p></footer>

    <div class="toast-container" id="toast-container"></div>

    <script>
        // User System
        let currentUser = JSON.parse(localStorage.getItem('casinoCurrentUser')) || null;
        let users = JSON.parse(localStorage.getItem('casinoUsers')) || {};
        let authMode = 'login';
        
        function showAuthModal(mode) {
            authMode = mode;
            document.getElementById('auth-modal').style.display = 'flex';
            document.getElementById('auth-title').innerText = mode === 'login' ? 'Login' : 'Sign Up';
            document.getElementById('auth-btn').innerText = mode === 'login' ? 'Login' : 'Sign Up';
            document.getElementById('auth-toggle-text').innerText = mode === 'login' ? "Don't have an account?" : "Already have an account?";
        }
        
        function closeAuthModal() {
            document.getElementById('auth-modal').style.display = 'none';
            document.getElementById('auth-username').value = '';
            document.getElementById('auth-password').value = '';
        }
        
        function toggleAuthMode() {
            authMode = authMode === 'login' ? 'signup' : 'login';
            showAuthModal(authMode);
        }
        
        function handleAuth() {
            const username = document.getElementById('auth-username').value.trim();
            const password = document.getElementById('auth-password').value;
            
            if (!username || !password) {
                showToast('Please fill in all fields', 'lose');
                return;
            }
            
            if (authMode === 'signup') {
                if (users[username]) {
                    showToast('Username already exists', 'lose');
                    return;
                }
                users[username] = {
                    password: btoa(password),
                    balance: 5000,
                    faucetLastClaim: 0,
                    stats: { wagered: 0, games: 0, biggestWin: 0 },
                    history: [],
                    created: Date.now()
                };
                localStorage.setItem('casinoUsers', JSON.stringify(users));
                showToast('Account created! You got 5000 free tokens!', 'win');
                currentUser = username;
                localStorage.setItem('casinoCurrentUser', username);
                loadUserData();
                closeAuthModal();
            } else {
                if (!users[username] || atob(users[username].password) !== password) {
                    showToast('Invalid username or password', 'lose');
                    return;
                }
                currentUser = username;
                localStorage.setItem('casinoCurrentUser', username);
                loadUserData();
                closeAuthModal();
                showToast('Welcome back, ' + username + '!', 'win');
            }
        }
        
        function loadUserData() {
            if (!currentUser || !users[currentUser]) return;
            const user = users[currentUser];
            balance = user.balance;
            faucetLastClaim = user.faucetLastClaim || 0;
            stats = user.stats || { wagered: 0, games: 0, biggestWin: 0 };
            betHistory = user.history || [];
            
            document.getElementById('user-section').style.display = 'none';
            document.getElementById('balance-section').style.display = 'flex';
            document.getElementById('user-name').innerText = currentUser;
            updateBalance();
            updateStats();
            updateHistory();
            checkFaucetTimer();
        }
        
        function saveUserData() {
            if (!currentUser || !users[currentUser]) return;
            users[currentUser].balance = balance;
            users[currentUser].faucetLastClaim = faucetLastClaim;
            users[currentUser].stats = stats;
            users[currentUser].history = betHistory;
            localStorage.setItem('casinoUsers', JSON.stringify(users));
        }
        
        function logout() {
            saveUserData();
            currentUser = null;
            localStorage.removeItem('casinoCurrentUser');
            location.reload();
        }
        
        // Override updateBalance to save user data
        const originalUpdateBalance = updateBalance;
        updateBalance = function() {
            originalUpdateBalance();
            saveUserData();
        }
        
        const originalUpdateStats = updateStats;
        updateStats = function() {
            originalUpdateStats();
            saveUserData();
        }
        
        const originalAddToHistory = addToHistory;
        addToHistory = function(game, bet, profit) {
            originalAddToHistory(game, bet, profit);
            saveUserData();
        }
        
        // Initialize user
        if (currentUser) {
            loadUserData();
        }

        // Audio Context for sound effects
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            
            if (type === 'win') {
                osc.frequency.setValueAtTime(523, audioCtx.currentTime);
                osc.frequency.setValueAtTime(659, audioCtx.currentTime + 0.1);
                osc.frequency.setValueAtTime(784, audioCtx.currentTime + 0.2);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
                osc.start(); osc.stop(audioCtx.currentTime + 0.4);
            } else if (type === 'lose') {
                osc.frequency.setValueAtTime(200, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'spin') {
                osc.type = 'square';
                osc.frequency.setValueAtTime(100, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                osc.start(); osc.stop(audioCtx.currentTime + 0.1);
            } else if (type === 'jackpot') {
                osc.frequency.setValueAtTime(523, audioCtx.currentTime);
                osc.frequency.setValueAtTime(659, audioCtx.currentTime + 0.1);
                osc.frequency.setValueAtTime(784, audioCtx.currentTime + 0.2);
                osc.frequency.setValueAtTime(1047, audioCtx.currentTime + 0.3);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start(); osc.stop(audioCtx.currentTime + 0.5);
            } else if (type === 'click') {
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.05);
                osc.start(); osc.stop(audioCtx.currentTime + 0.05);
            }
        }

        // Game State
        let balance = parseInt(localStorage.getItem('casinoBalance')) || 5000;
        let faucetLastClaim = parseInt(localStorage.getItem('faucetLastClaim')) || 0;
        let stats = JSON.parse(localStorage.getItem('casinoStats')) || { wagered: 0, games: 0, biggestWin: 0 };
        let betHistory = JSON.parse(localStorage.getItem('casinoHistory')) || [];
        let leaderboard = JSON.parse(localStorage.getItem('casinoLeaderboard')) || [];
        
        let selectedCoin = 'heads';
        let selectedRoulette = 'red';
        let selectedHL = 'higher';
        let kenoSelected = [];
        let currentCard = null;
        
        const SLOT_SYMBOLS = ['üçí', 'üçã', 'üçá', 'üíé', 'ü™ô', 'üé∞', '7Ô∏è‚É£'];
        const CARD_SUITS = ['‚ô†Ô∏è', '‚ô•Ô∏è', '‚ô£Ô∏è', '‚ô¶Ô∏è'];
        const CARD_RANKS = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        const CARD_VALUES = { 'A': 1, '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10, 'J': 11, 'Q': 12, 'K': 13 };

        // Initialize
        updateBalance();
        updateStats();
        renderKenoGrid();
        updateLeaderboard();
        updateHistory();
        checkFaucetTimer();
        setInterval(checkFaucetTimer, 1000);

        function updateBalance() {
            document.getElementById('balance').textContent = balance.toLocaleString();
            document.getElementById('stat-balance').textContent = balance.toLocaleString();
            localStorage.setItem('casinoBalance', balance);
        }

        function updateStats() {
            document.getElementById('stat-wagered').textContent = stats.wagered.toLocaleString();
            document.getElementById('stat-games').textContent = stats.games;
            document.getElementById('stat-biggest').textContent = stats.biggestWin.toLocaleString();
            localStorage.setItem('casinoStats', JSON.stringify(stats));
        }

        function addToHistory(game, bet, profit) {
            betHistory.unshift({ game, bet, profit, time: Date.now() });
            if (betHistory.length > 50) betHistory = betHistory.slice(0, 50);
            localStorage.setItem('casinoHistory', JSON.stringify(betHistory));
            updateHistory();
        }

        function updateHistory() {
            const tbody = document.getElementById('history-body');
            tbody.innerHTML = betHistory.slice(0, 20).map(h => `
                <tr>
                    <td>${h.game}</td>
                    <td>${h.bet}</td>
                    <td class="${h.profit >= 0 ? 'history-win' : 'history-lose'}">${h.profit >= 0 ? '+' : ''}${h.profit}</td>
                    <td class="${h.profit >= 0 ? 'history-win' : 'history-lose'}">${h.profit >= 0 ? 'WIN' : 'LOSE'}</td>
                </tr>
            `).join('') || '<tr><td colspan="4" style="text-align:center;color:var(--text-muted)">No bets yet</td></tr>';
        }

        function updateLeaderboard() {
            leaderboard.sort((a, b) => b.winnings - a.winnings);
            const top5 = leaderboard.slice(0, 5);
            document.getElementById('leaderboard-body').innerHTML = top5.map((p, i) => `
                <tr><td>${i + 1}</td><td>${p.name}</td><td>${p.winnings.toLocaleString()}</td><td>${p.games}</td></tr>
            `).join('') || '<tr><td colspan="4" style="text-align:center;color:var(--text-muted)">No players yet</td></tr>';
        }

        function showToast(message, type) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = message;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function checkFaucetTimer() {
            const now = Date.now();
            const elapsed = now - faucetLastClaim;
            const remaining = Math.max(0, 86400000 - elapsed);
            const hours = Math.floor(remaining / 3600000);
            const minutes = Math.floor((remaining % 3600000) / 60000);
            const btn = document.getElementById('faucetBtn');
            
            if (remaining > 0) {
                btn.disabled = true;
                btn.textContent = `${hours}h ${minutes}m`;
            } else {
                btn.disabled = false;
                btn.textContent = 'üíß Faucet';
            }
        }

        function claimFaucet() {
            if (!currentUser) {
                showToast('Please login first!', 'lose');
                return;
            }
            const now = Date.now();
            if (now - faucetLastClaim < 86400000) return;
            
            balance += 5000;
            faucetLastClaim = now;
            localStorage.setItem('faucetLastClaim', faucetLastClaim);
            updateBalance();
            playSound('win');
            showToast('+5000 tokens claimed! üéâ', 'win');
            checkFaucetTimer();
        }

        function setBet(game, amount) {
            document.getElementById(`${game}-bet`).value = amount;
            playSound('click');
        }

        // Navigation
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                playSound('click');
                document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
                document.querySelectorAll('.game-section').forEach(s => s.classList.remove('active'));
                link.classList.add('active');
                const game = link.dataset.game;
                document.getElementById(`${game}-section`).classList.add('active');
            });
        });

        // Slots
        function playSlots() {
            const bet = parseInt(document.getElementById('slots-bet').value);
            if (bet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (bet <= 0) return;
            
            balance -= bet;
            stats.wagered += bet;
            stats.games++;
            updateBalance();
            updateStats();
            
            const reels = document.querySelectorAll('.slot-reel');
            let spins = 0;
            const maxSpins = 20;
            
            reels.forEach((reel, i) => {
                reel.innerHTML = 'üé∞';
            });
            
            const spinInterval = setInterval(() => {
                reels.forEach(reel => {
                    reel.innerHTML = SLOT_SYMBOLS[Math.floor(Math.random() * SLOT_SYMBOLS.length)];
                });
                playSound('spin');
                spins++;
                if (spins >= maxSpins) {
                    clearInterval(spinInterval);
                    const results = SLOT_SYMBOLS.slice(0, 5);
                    reels.forEach((reel, i) => {
                        setTimeout(() => {
                            reel.innerHTML = results[i];
                        }, i * 200);
                    });
                    
                    setTimeout(() => {
                        const symbols = Array.from(reels).map(r => r.innerHTML);
                        let multiplier = 0;
                        
                        if (symbols[0] === symbols[1] && symbols[1] === symbols[2]) multiplier = 10;
                        else if (symbols[0] === symbols[1] || symbols[1] === symbols[2] || symbols[0] === symbols[2]) multiplier = 2;
                        else if (symbols.filter(s => s === '7Ô∏è‚É£').length >= 3) multiplier = 50;
                        else if (symbols.filter(s => s === 'üíé').length >= 3) multiplier = 20;
                        else if (symbols.filter(s => s === 'ü™ô').length >= 3) multiplier = 15;
                        
                        const win = bet * multiplier;
                        if (win > 0) {
                            balance += win;
                            if (win > stats.biggestWin) stats.biggestWin = win;
                            addToHistory('Slots', bet, win);
                            playSound('win');
                            showToast(`+${win.toLocaleString()} WIN!`, 'win');
                        } else {
                            addToHistory('Slots', bet, -bet);
                            playSound('lose');
                        }
                        
                        updateBalance();
                        updateStats();
                    }, 1200);
                }
            }, 100);
        }

        // Coin Flip
        function selectCoin(choice) {
            selectedCoin = choice;
            document.querySelectorAll('#coinflip-section .roulette-bet-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
        }

        function playCoinFlip() {
            const bet = parseInt(document.getElementById('coin-bet').value);
            if (bet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (bet <= 0) return;
            
            balance -= bet;
            stats.wagered += bet;
            stats.games++;
            updateBalance();
            
            const display = document.getElementById('coin-display');
            display.classList.add('spin');
            playSound('spin');
            
            setTimeout(() => {
                display.classList.remove('spin');
                const result = Math.random() < 0.5 ? 'heads' : 'tails';
                display.innerHTML = result === 'heads' ? 'ü¶Ö' : 'ü™ô';
                
                if (result === selectedCoin) {
                    const win = bet * 2;
                    balance += win;
                    if (win > stats.biggestWin) stats.biggestWin = win;
                    addToHistory('Coin Flip', bet, win);
                    playSound('win');
                    showToast(`+${win} WIN!`, 'win');
                } else {
                    addToHistory('Coin Flip', bet, -bet);
                    playSound('lose');
                }
                updateBalance();
                updateStats();
            }, 1000);
        }

        // Dice
        function playDice() {
            const bet = parseInt(document.getElementById('dice-bet').value);
            const type = document.getElementById('dice-type').value;
            const number = parseInt(document.getElementById('dice-number').value);
            
            if (bet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (bet <= 0) return;
            
            balance -= bet;
            stats.wagered += bet;
            stats.games++;
            updateBalance();
            
            const display = document.getElementById('dice-display');
            display.classList.add('spin');
            playSound('spin');
            
            setTimeout(() => {
                display.classList.remove('spin');
                const roll = Math.floor(Math.random() * 100) + 1;
                display.innerHTML = `üé≤<br><span style="font-size:2rem">${roll}</span>`;
                
                let won = false;
                if (type === 'over' && roll > number) won = true;
                if (type === 'under' && roll < number) won = true;
                
                if (won) {
                    const win = bet * 2;
                    balance += win;
                    if (win > stats.biggestWin) stats.biggestWin = win;
                    addToHistory('Dice', bet, win);
                    playSound('win');
                    showToast(`+${win} WIN!`, 'win');
                } else {
                    addToHistory('Dice', bet, -bet);
                    playSound('lose');
                }
                updateBalance();
                updateStats();
            }, 1000);
        }

        // Roulette
        function selectRoulette(choice) {
            selectedRoulette = choice;
            document.querySelectorAll('#roulette-section .roulette-bet-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
        }

        function playRoulette() {
            const bet = parseInt(document.getElementById('roulette-bet').value);
            if (bet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (bet <= 0) return;
            
            balance -= bet;
            stats.wagered += bet;
            stats.games++;
            updateBalance();
            
            const wheel = document.getElementById('roulette-wheel');
            const ball = wheel.querySelector('.roulette-ball');
            const resultEl = document.getElementById('roulette-result');
            
            // Determine result first
            const num = Math.floor(Math.random() * 37);
            const color = num === 0 ? 'green' : (num % 2 === 1 ? 'red' : 'black');
            
            // Calculate rotation to land on the number
            // Each number is about 9.73 degrees (360/37)
            const baseRotation = 3600 + (37 - num) * 9.73;
            
            ball.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
            ball.style.transform = `translateX(-50%) rotate(${baseRotation}deg)`;
            
            // Play spin sound multiple times
            let spinCount = 0;
            const spinSound = setInterval(() => {
                playSound('spin');
                spinCount++;
                if (spinCount >= 8) clearInterval(spinSound);
            }, 400);
            
            setTimeout(() => {
                resultEl.innerHTML = num === 0 ? 'üü¢ 0' : (color === 'red' ? `üî¥ ${num}` : `‚ö´ ${num}`);
                
                let won = false;
                let multiplier = 0;
                
                if (color === selectedRoulette) {
                    won = true;
                    multiplier = selectedRoulette === 'green' ? 14 : 2;
                }
                
                if (won) {
                    const win = bet * multiplier;
                    balance += win;
                    if (win > stats.biggestWin) stats.biggestWin = win;
                    addToHistory('Roulette', bet, win);
                    playSound('win');
                    showToast(`+${win} WIN!`, 'win');
                } else {
                    addToHistory('Roulette', bet, -bet);
                    playSound('lose');
                }
                updateBalance();
                updateStats();
                
                // Reset ball position after a delay
                setTimeout(() => {
                    ball.style.transition = 'none';
                    ball.style.transform = 'translateX(-50%) rotate(0deg)';
                }, 2000);
            }, 4000);
        }

        // Keno
        function renderKenoGrid() {
            const grid = document.getElementById('keno-grid');
            grid.innerHTML = '';
            for (let i = 1; i <= 80; i++) {
                const num = document.createElement('div');
                num.className = 'keno-number';
                num.textContent = i;
                num.onclick = () => toggleKeno(i, num);
                grid.appendChild(num);
            }
        }

        function toggleKeno(num, el) {
            if (kenoSelected.includes(num)) {
                kenoSelected = kenoSelected.filter(n => n !== num);
                el.classList.remove('selected');
            } else if (kenoSelected.length < 10) {
                kenoSelected.push(num);
                el.classList.add('selected');
            }
            document.getElementById('keno-count').textContent = kenoSelected.length;
            playSound('click');
        }

        function playKeno() {
            const bet = parseInt(document.getElementById('keno-bet').value);
            if (bet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (kenoSelected.length === 0) { showToast('Pick numbers first!', 'lose'); return; }
            if (bet <= 0) return;
            
            balance -= bet;
            stats.wagered += bet;
            stats.games++;
            updateBalance();
            
            const draw = [];
            while (draw.length < 20) {
                const n = Math.floor(Math.random() * 80) + 1;
                if (!draw.includes(n)) draw.push(n);
            }
            
            const hits = kenoSelected.filter(n => draw.includes(n)).length;
            const multipliers = [0, 2, 5, 10, 50, 100, 200, 500, 1000, 2000, 5000];
            const win = bet * (multipliers[hits] || 0);
            
            document.querySelectorAll('.keno-number').forEach(el => {
                const n = parseInt(el.textContent);
                if (draw.includes(n)) el.classList.add('hit');
                else if (kenoSelected.includes(n)) el.classList.add('miss');
            });
            
            setTimeout(() => {
                if (win > 0) {
                    balance += win;
                    if (win > stats.biggestWin) stats.biggestWin = win;
                    addToHistory('Keno', bet, win);
                    playSound('win');
                    showToast(`${hits} hits! +${win} WIN!`, 'win');
                } else {
                    addToHistory('Keno', bet, -bet);
                    playSound('lose');
                    showToast(`${hits} hits - no win`, 'lose');
                }
                updateBalance();
                updateStats();
                
                setTimeout(() => {
                    kenoSelected = [];
                    document.querySelectorAll('.keno-number').forEach(el => {
                        el.classList.remove('selected', 'hit', 'miss');
                    });
                    document.getElementById('keno-count').textContent = '0';
                }, 3000);
            }, 1000);
        }

        // High/Low
        function selectHL(choice) {
            selectedHL = choice;
            document.querySelectorAll('.hl-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
        }

        function getRandomCard() {
            const suit = CARD_SUITS[Math.floor(Math.random() * 4)];
            const rank = CARD_RANKS[Math.floor(Math.random() * 13)];
            return { suit, rank, value: CARD_VALUES[rank] };
        }

        function playHighLow() {
            const bet = parseInt(document.getElementById('hl-bet').value);
            if (bet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (bet <= 0) return;
            
            if (!currentCard) currentCard = getRandomCard();
            
            balance -= bet;
            stats.wagered += bet;
            stats.games++;
            updateBalance();
            
            const display = document.getElementById('card-display');
            display.innerHTML = currentCard.suit + currentCard.rank;
            document.getElementById('dealer-card-rank').textContent = currentCard.rank + currentCard.suit;
            
            setTimeout(() => {
                const newCard = getRandomCard();
                display.innerHTML = newCard.suit + newCard.rank;
                
                let won = false;
                if (selectedHL === 'higher' && newCard.value > currentCard.value) won = true;
                else if (selectedHL === 'lower' && newCard.value < currentCard.value) won = true;
                else if (newCard.value === currentCard.value) won = true;
                
                if (won) {
                    const win = bet * 2;
                    balance += win;
                    if (win > stats.biggestWin) stats.biggestWin = win;
                    addToHistory('High/Low', bet, win);
                    playSound('win');
                    showToast(`+${win} WIN!`, 'win');
                } else {
                    addToHistory('High/Low', bet, -bet);
                    playSound('lose');
                }
                
                currentCard = newCard;
                updateBalance();
                updateStats();
            }, 1000);
        }

        // Lottery
        function playLottery() {
            const bet = parseInt(document.getElementById('lottery-bet').value);
            if (bet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (bet <= 0) return;
            
            balance -= bet;
            stats.wagered += bet;
            stats.games++;
            updateBalance();
            
            const display = document.getElementById('lottery-display');
            display.innerHTML = 'üé≤';
            playSound('spin');
            
            setTimeout(() => {
                const yourNumbers = [];
                while (yourNumbers.length < 5) {
                    const n = Math.floor(Math.random() * 50) + 1;
                    if (!yourNumbers.includes(n)) yourNumbers.push(n);
                }
                const winningNumbers = [];
                while (winningNumbers.length < 5) {
                    const n = Math.floor(Math.random() * 50) + 1;
                    if (!winningNumbers.includes(n)) winningNumbers.push(n);
                }
                
                const matches = yourNumbers.filter(n => winningNumbers.includes(n)).length;
                const multipliers = [0, 2, 5, 10, 50, 100];
                const win = bet * (multipliers[matches] || 0);
                
                display.innerHTML = yourNumbers.map(n => winningNumbers.includes(n) ? `<span style="color:var(--success)">${n}</span>` : n).join(' ');
                
                if (win > 0) {
                    balance += win;
                    if (win > stats.biggestWin) stats.biggestWin = win;
                    addToHistory('Lottery', bet, win);
                    playSound('win');
                    showToast(`${matches} matches! +${win} WIN!`, 'win');
                } else {
                    addToHistory('Lottery', bet, -bet);
                    playSound('lose');
                    showToast(`${matches} matches - try again!`, 'lose');
                }
                updateBalance();
                updateStats();
            }, 1500);
        }

        // Jackpot
        function playJackpot() {
            const bet = parseInt(document.getElementById('jackpot-bet').value);
            if (bet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (bet <= 0) return;
            
            balance -= bet;
            stats.wagered += bet;
            stats.games++;
            updateBalance();
            
            const win = Math.random() < 0.001;
            const jackpot = 10000;
            
            if (win) {
                balance += jackpot;
                if (jackpot > stats.biggestWin) stats.biggestWin = jackpot;
                addToHistory('Jackpot', bet, jackpot);
                playSound('jackpot');
                showToast(`üéâ JACKPOT! +${jackpot.toLocaleString()}! üéâ`, 'win');
            } else {
                addToHistory('Jackpot', bet, -bet);
                playSound('lose');
                showToast('No jackpot this time...', 'lose');
            }
            updateBalance();
            updateStats();
        }

        // Blackjack
        let bjDeck = [], bjPlayerHand = [], bjDealerHand = [], bjBet = 0;
        
        function createDeck() {
            const suits = ['‚ô†Ô∏è', '‚ô•Ô∏è', '‚ô£Ô∏è', '‚ô¶Ô∏è'];
            const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            const deck = [];
            for (let s of suits) for (let r of ranks) deck.push({suit: s, rank: r});
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            return deck;
        }
        
        function cardValue(card) {
            if (['J', 'Q', 'K'].includes(card.rank)) return 10;
            if (card.rank === 'A') return 11;
            return parseInt(card.rank);
        }
        
        function handScore(hand) {
            let score = hand.reduce((a, c) => a + cardValue(c), 0);
            let aces = hand.filter(c => c.rank === 'A').length;
            while (score > 21 && aces > 0) { score -= 10; aces--; }
            return score;
        }
        
        function startBlackjack() {
            bjBet = parseInt(document.getElementById('blackjack-bet').value);
            if (bjBet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (bjBet <= 0) return;
            
            balance -= bjBet;
            stats.wagered += bjBet;
            stats.games++;
            updateBalance();
            
            bjDeck = createDeck();
            bjPlayerHand = [bjDeck.pop(), bjDeck.pop()];
            bjDealerHand = [bjDeck.pop(), bjDeck.pop()];
            
            document.getElementById('dealer-cards').innerHTML = bjDealerHand[0].suit + bjDealerHand[0].rank + ' üÇ†';
            document.getElementById('dealer-score').innerHTML = 'Score: ?';
            document.getElementById('player-cards').innerHTML = bjPlayerHand.map(c => c.suit + c.rank).join(' ');
            document.getElementById('player-score').innerHTML = 'Score: ' + handScore(bjPlayerHand);
            document.getElementById('bj-result').innerHTML = '';
            
            document.getElementById('bj-deal-btn').style.display = 'none';
            document.getElementById('bj-hit-btn').style.display = 'inline-block';
            document.getElementById('bj-stand-btn').style.display = 'inline-block';
            
            playSound('spin');
            
            if (handScore(bjPlayerHand) === 21) standBlackjack();
        }
        
        function hitBlackjack() {
            bjPlayerHand.push(bjDeck.pop());
            document.getElementById('player-cards').innerHTML = bjPlayerHand.map(c => c.suit + c.rank).join(' ');
            document.getElementById('player-score').innerHTML = 'Score: ' + handScore(bjPlayerHand);
            playSound('spin');
            
            if (handScore(bjPlayerHand) > 21) {
                endBlackjack('Bust! You lose!', -bjBet);
            }
        }
        
        function standBlackjack() {
            while (handScore(bjDealerHand) < 17) {
                bjDealerHand.push(bjDeck.pop());
            }
            document.getElementById('dealer-cards').innerHTML = bjDealerHand.map(c => c.suit + c.rank).join(' ');
            document.getElementById('dealer-score').innerHTML = 'Score: ' + handScore(bjDealerHand);
            
            const pScore = handScore(bjPlayerHand);
            const dScore = handScore(bjDealerHand);
            
            if (dScore > 21) {
                endBlackjack('Dealer busts! You win!', bjBet * 2);
            } else if (pScore > dScore) {
                endBlackjack('You win!', bjBet * 2);
            } else if (pScore < dScore) {
                endBlackjack('Dealer wins!', -bjBet);
            } else {
                endBlackjack('Push!', 0);
            }
        }
        
        function endBlackjack(msg, profit) {
            const resultEl = document.getElementById('bj-result');
            resultEl.innerHTML = msg;
            resultEl.className = profit > 0 ? 'win' : profit < 0 ? 'lose' : '';
            
            if (profit !== 0) {
                balance += profit;
                if (profit > 0 && profit > stats.biggestWin) stats.biggestWin = profit;
                addToHistory('Blackjack', bjBet, profit);
                playSound(profit > 0 ? 'win' : 'lose');
                showToast(profit > 0 ? `+${profit} WIN!` : `${profit} LOSE`, profit > 0 ? 'win' : 'lose');
            }
            
            updateBalance();
            updateStats();
            
            document.getElementById('bj-deal-btn').style.display = 'inline-block';
            document.getElementById('bj-hit-btn').style.display = 'none';
            document.getElementById('bj-stand-btn').style.display = 'none';
        }

        // Video Poker
        let vpDeck = [], vpHand = [], vpBet = 0;
        const POKER_PAYOUTS = {
            'Royal Flush': 800, 'Straight Flush': 50, 'Four of a Kind': 25, 'Full House': 9,
            'Flush': 6, 'Straight': 4, 'Three of a Kind': 3, 'Two Pair': 2, 'Jacks or Better': 1
        };
        
        function dealVideoPoker() {
            vpBet = parseInt(document.getElementById('videopoker-bet').value);
            if (vpBet > balance) { showToast('Not enough tokens!', 'lose'); return; }
            if (vpBet <= 0) return;
            
            balance -= vpBet;
            stats.wagered += vpBet;
            stats.games++;
            updateBalance();
            
            vpDeck = createDeck();
            vpHand = [vpDeck.pop(), vpDeck.pop(), vpDeck.pop(), vpDeck.pop(), vpDeck.pop()];
            
            renderVPCards();
            document.getElementById('vp-deal-btn').style.display = 'none';
            document.getElementById('vp-draw-btn').style.display = 'inline-block';
            document.getElementById('vp-result').innerHTML = '';
            document.getElementById('vp-hand-name').innerHTML = '';
            
            playSound('spin');
        }
        
        function renderVPCards() {
            const container = document.getElementById('vp-cards');
            container.innerHTML = vpHand.map((c, i) => 
                `<span class="vp-card" data-index="${i}" data-held="${vpHand[i].held || false}" onclick="toggleVPCard(${i})" style="${vpHand[i].held ? 'color:var(--primary)' : ''}">${c.suit}${c.rank}</span>`
            ).join(' ');
        }
        
        function toggleVPCard(index) {
            if (document.getElementById('vp-draw-btn').style.display === 'none') return;
            vpHand[index].held = !vpHand[index].held;
            renderVPCards();
            playSound('click');
        }
        
        function drawVideoPoker() {
            for (let i = 0; i < vpHand.length; i++) {
                if (!vpHand[i].held) vpHand[i] = vpDeck.pop();
            }
            renderVPCards();
            
            const handType = evaluatePokerHand(vpHand);
            const payout = POKER_PAYOUTS[handType] || 0;
            const win = vpBet * payout;
            
            const resultEl = document.getElementById('vp-result');
            const handNameEl = document.getElementById('vp-hand-name');
            
            if (win > 0) {
                balance += win;
                if (win > stats.biggestWin) stats.biggestWin = win;
                addToHistory('Video Poker', vpBet, win);
                playSound('win');
                showToast(`${handType}! +${win} WIN!`, 'win');
                resultEl.innerHTML = `+${win} WIN!`;
                resultEl.className = 'win';
            } else {
                addToHistory('Video Poker', vpBet, -vpBet);
                playSound('lose');
                resultEl.innerHTML = 'No win this time';
                resultEl.className = 'lose';
            }
            
            handNameEl.innerHTML = handType;
            handNameEl.style.color = win > 0 ? 'var(--success)' : 'var(--text-muted)';
            
            updateBalance();
            updateStats();
            
            document.getElementById('vp-deal-btn').style.display = 'inline-block';
            document.getElementById('vp-draw-btn').style.display = 'none';
        }
        
        function evaluatePokerHand(hand) {
            const ranks = hand.map(c => c.rank);
            const suits = hand.map(c => c.suit);
            const counts = {};
            ranks.forEach(r => counts[r] = (counts[r] || 0) + 1);
            
            const isFlush = suits.every(s => s === suits[0]);
            const sortedRanks = ranks.map(r => ['J','Q','K','A'].includes(r) ? (r==='J'?11:r==='Q'?12:r==='K'?13:14) : parseInt(r)).sort((a,b) => a-b);
            const isStraight = sortedRanks.every((r, i) => i === 0 || r === sortedRanks[i-1] + 1) || 
                              (sortedRanks[0]===2 && sortedRanks[1]===3 && sortedRanks[2]===4 && sortedRanks[3]===5 && sortedRanks[4]===14);
            
            const values = Object.values(counts);
            
            if (isFlush && isStraight && sortedRanks[4] === 14) return 'Royal Flush';
            if (isFlush && isStraight) return 'Straight Flush';
            if (values.includes(4)) return 'Four of a Kind';
            if (values.includes(3) && values.includes(2)) return 'Full House';
            if (isFlush) return 'Flush';
            if (isStraight) return 'Straight';
            if (values.includes(3)) return 'Three of a Kind';
            if (values.filter(v => v === 2).length === 2) return 'Two Pair';
            if (counts['J'] || counts['Q'] || counts['K'] || counts['A']) return 'Jacks or Better';
            return 'No win';
        }
    </script>
</body>
</html>
